{"version":3,"file":"syncProjectRefs.js","sources":["../../src/commands/syncProjectRefs.ts"],"sourcesContent":null,"names":["syncProjectRefs","tool","driver","driverRegistry","get","root","project","buildFolder","declarationOnly","srcFolder","testsFolder","typesFolder","globalTypes","localTypes","options","optionsConfigPath","append","globalTypesPath","namesToPaths","workspacePackages","getWorkspacePackages","forEach","wsPkg","package","name","metadata","packagePath","Promise","all","map","dependencies","devDependencies","peerDependencies","tsconfig","workspace","pkgPath","Path","srcPath","testsPath","references","promises","Object","keys","depName","push","path","relativeTo","exists","packageConfig","compilerOptions","declarationDir","outDir","rootDir","exclude","extends","include","join","emitDeclarationOnly","Array","isArray","configPath","onCreateProjectConfigFile","emit","writeFile","testConfig","composite","noEmit"],"mappings":"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"}