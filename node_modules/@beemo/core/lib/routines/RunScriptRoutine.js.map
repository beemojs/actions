{"version":3,"file":"RunScriptRoutine.js","sources":["../../src/routines/RunScriptRoutine.ts"],"sourcesContent":null,"names":["RunScriptRoutine","Bind","RunInWorkspacesRoutine","errors","getInitialValue","context","tool","options","createWaterfallPipeline","pipe","msg","loadScriptFromTool","loadScriptFromModule","postLoad","run","pipeRoutine","packageName","packageRoot","argv","cwd","scriptName","filteredArgv","filterArgs","block","EXECUTE_OPTIONS","command","join","routines","push","ExecuteScriptRoutine","path","debug","script","scriptRegistry","get","setScript","error","instanceOf","Error","message","moduleName","config","module","fileName","upperFirst","camelCase","resolver","PathResolver","root","configModuleRoot","lookupFilePath","lookupNodeModule","formatModuleName","resolvedPath","resolve","loadedScript","load","undefined","messages","map"],"mappings":"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"}