{"version":3,"file":"Packemon.js","sources":["../src/Packemon.ts"],"sourcesContent":null,"names":["Packemon","Memoize","constructor","cwd","process","debug","onPackageBuilt","Event","onPackagesLoaded","project","root","Path","resolve","Project","createDebugger","checkEngineVersionConstraint","build","baseOptions","options","optimal","buildBlueprint","packages","loadConfiguredPackages","generateArtifacts","length","Error","pipeline","PooledPipeline","Context","configure","concurrency","timeout","forEach","pkg","add","getName","emit","errors","run","cleanTemporaryFiles","clean","formatFolders","pathsToRemove","isWorkspacesEnabled","workspaces","ws","push","path","Promise","all","map","rfPath","reject","rimraf","error","undefined","validate","validateBlueprint","PackageValidator","findPackagesInProject","filter","skipPrivate","pkgPaths","getWorkspaceGlobs","relative","getWorkspacePackagePaths","filePath","create","append","pkgPath","contents","json","parse","fs","readFile","name","replace","metadata","createWorkspaceMetadata","package","privatePackageNames","private","join","filteredPackageNames","matchesPattern","declaration","filterFormats","filterPlatforms","typesBuilds","sharedLib","requiresSharedLib","configs","config","index","builds","formats","format","platform","artifact","CodeArtifact","bundle","configGroup","externals","inputs","namespace","support","addArtifact","Object","entries","outputName","inputFile","TypesArtifact","values","declarationType","artifacts","validateAndPreparePackages","cleanup","platformsToCheck","Set","libFormatCount","size","nextPackages","packemon","isObject","Array","isArray","Package","packagePath","setConfigs","toArray"],"mappings":"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"}