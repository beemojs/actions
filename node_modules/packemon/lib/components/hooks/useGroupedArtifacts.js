'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

const React = require('react');

const CodeArtifact = require('../../CodeArtifact.js');

function useGroupedArtifacts(pkg) {
  return React.useMemo(() => {
    const ungrouped = [];
    let groups = {}; // Group artifacts by platform and support

    pkg.artifacts.forEach(artifact => {
      if (artifact instanceof CodeArtifact.CodeArtifact) {
        var _groups$key;

        const key = `${artifact.platform}:${artifact.support}`;
        const set = (_groups$key = groups[key]) !== null && _groups$key !== void 0 ? _groups$key : new Set();
        set.add(artifact);
        groups[key] = set;
      } else {
        ungrouped.push(artifact);
      }
    }); // If only 1 group, collapse into a single target

    const envs = Object.keys(groups);

    if (envs.length === 1) {
      ungrouped.unshift(...groups[envs[0]]);
      groups = {};
    }

    return {
      envs,
      groups,
      ungrouped
    };
  }, [pkg]);
}

exports.useGroupedArtifacts = useGroupedArtifacts;
//# sourceMappingURL=useGroupedArtifacts.js.map
