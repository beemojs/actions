'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

const React = require('react');

const react = require('@boost/cli/react');

const PackageRow = require('./PackageRow.js');

const _interopDefault = e => e && e.__esModule ? e : {
  default: e
};

const React__default = /*#__PURE__*/_interopDefault(React);

function PackageList({
  packages
}) {
  const _react$useDimensions = react.useDimensions(),
        height = _react$useDimensions.height; // We dont want to show more packages than the amount of rows available in the terminal


  const visiblePackages = [];
  let currentHeight = 0;
  packages.filter(pkg => pkg.isRunning()).some(pkg => {
    // margin (2) + name row (1) + artifacts (n)
    const rowHeight = 3 + pkg.artifacts.length; // Not enough room to display another row

    if (currentHeight + rowHeight > height) {
      return true;
    }

    visiblePackages.push(pkg);
    currentHeight += rowHeight;
    return false;
  });

  if (visiblePackages.length === 0) {
    return null;
  }

  return /*#__PURE__*/React__default.default.createElement(React__default.default.Fragment, null, visiblePackages.map(pkg => /*#__PURE__*/React__default.default.createElement(PackageRow.PackageRow, {
    key: `build-${pkg.getName()}`,
    package: pkg
  })));
}

exports.PackageList = PackageList;
//# sourceMappingURL=PackageList.js.map
