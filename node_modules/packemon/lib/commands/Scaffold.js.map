{"version":3,"file":"Scaffold.js","sources":["../../src/commands/Scaffold.tsx"],"sourcesContent":null,"names":["ScaffoldCommand","Config","Arg","Flag","short","String","choices","Params","label","description","type","required","Command","dest","destDir","run","path","join","process","cwd","Scaffold","React","template","params","scaffold","scaffoldMonorepo","scaffoldMonorepoPackage","scaffoldPolyrepo","scaffoldPolyrepoPackage","checkExistingInfrastructure","copyFilesFromTemplate","packagesFolder","installDependencies","fs","mkdir","packagesDir","existsSync","Error","packageName","folderName","startsWith","split","packageDir","packagePath","addProjectReference","tsconfigPath","tsconfig","loadJsonConfig","Array","isArray","references","push","sort","a","b","localeCompare","writeJson","spaces","skipInstall","args","packageManager","version","Number","parseFloat","executeCommand","stdout","unshift","filter","Boolean","pkg","infra","copyFile","fromTemplate","toDest","isPackage","endsWith","force","toDir","dirname","ensureDir","content","readFile","Object","entries","forEach","key","value","replace","RegExp","prevContent","nextContent","json","parse","writeFile","templateDir","fileURLToPath","URL","import","files","glob","absolute","dot","Promise","all","map","file","filePath"],"mappings":"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"}